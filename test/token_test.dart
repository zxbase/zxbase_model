// Copyright (C) 2022 Zxbase, LLC. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import 'package:zxbase_model/zxbase_model.dart';
import 'package:test/test.dart';

void main() {
  var tokenStr =
      'eyJhbGciOiJlZDI1NTE5IiwidHlwIjoiSldUIiwieDVjIjoiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXG5NSUlDL3pDQ0FlY0NDUURzdUlrQ2Y0ZWUwakFOQmdrcWhraUc5dzBCQVFVRkFEQkJNUXN3Q1FZRFZRUUdFd0pWXG5VekVMTUFrR0ExVUVDQXdDUTBFeEN6QUpCZ05WQkFjTUFreEhNUXN3Q1FZRFZRUUtEQUpEUVRFTE1Ba0dBMVVFXG5Bd3dDUTBFd0hoY05NakV3T1RFME1UYzBNRFUzV2hjTk1qRXhNREUwTVRjME1EVTNXakJDTVFzd0NRWURWUVFHXG5Fd0pWVXpFTE1Ba0dBMVVFQ0F3Q1EwRXhFakFRQmdOVkJBb01DV3h2WTJGc2FHOXpkREVTTUJBR0ExVUVBd3dKXG5iRzlqWVd4b2IzTjBNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXBFMEpERkFpXG5LV1FrZSsxblRIN0h1elNhMk1vdnYvcXVSU3dOZUdseC85dGpkYytVUnltNGtJaU5IbTdLZjJRVFNrWWErNlFjXG4vUzNqRUFBVlhmaUJoSm5jUk9VcS9PdEdZTllFcEpybWNBYXdIZlFMdlJGbzJ0cWJua2VqalFIK0NNWnJ0dFF6XG53N2dlNDhndEZ5d3VIbWx6UXppb1QwaHgvTFdEK05YSkxwdzd3MW80aU1vUzhSMVhTZlcvaDNDR3RaWmVJTFJuXG5Ld3p2dlB5eUE1SFlUelhOcmJmeStmeDd5K0hzblRrKzVsYjJrRDc4MFdpOERJOUFnb01sdjJLWlZXM3BzQkpHXG40MWJGOWJScWlybENoQ2YvcW1kTVlVcmRsem1DM0g5UFp6cGgvdm5ZYi9jaGdod0RDZTJiNmVZK1FJTnplM0hqXG5nYlpTc2lnbERGY2NqUUlEQVFBQk1BMEdDU3FHU0liM0RRRUJCUVVBQTRJQkFRQkc2Y25CclZFVzF1K21UWWdUXG5kN1kycnFITXBlODE3YzRtSVFRU0grWktQTlBWK0JPZHo1WWVJcGZEdW5vY3F5M0JXK0NLbWxCcHVQRDkxdVJpXG5GMnduNE0wMnlZQ2ZFR1o0RElzdWE3S0JQWXpzaTJCQnVLbG41ODlhNFNKemMwckpiOXJYdzJRUk5Tb3hBei9uXG5zWTFoaVpEUTlzZjBhU1d6YXFEL1l5bnRlWDJTeGVPbk9vR2NGVklHY09uc1ZhRXR6dmZTWkEvK0xqT2hMZGZ1XG55ZnEwQklka0xTVnVuRS85Q2o3bk9SeHk1aUJId3ZiYlFXYllweUdIUFBpV3VRVnQyY09JeWNMMTF1L3V6Q0N5XG5tMmc1T21oelRnR3VTWlZnTC9JbHJMMzg4dWtnaGxjVmp3VFJnTG0zTEViQ2Q5dGNXOFUwU09yTVRZcWJBMzVHXG4zSnF6XG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tXG4ifQ%3D%3D.eyJqdGkiOiIxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAiLCJpc3MiOiJDPVVTXG5TVD1DQVxuTz1sb2NhbGhvc3RcbkNOPWxvY2FsaG9zdCIsInN1YiI6MjAsImlhdCI6MTYzMjM0OTkyNzY3MSwiZXhwIjoxNjMyMzUxMTI3NjcxLCJjbmYiOiJNQ293QlFZREsyVndBeUVBUVQ4TlQ4akdIYWlqTGY0RUhWNldhcHZwTENFVHNKYUVGYU5uZXRIc0E2OCJ9.kNeHDHd0i2BXU2nbGMfw9NUdbH3lVaVC6CwR0e1nLJGpzkZoIDdD1JXMLNE4w6oV0s7s7GN3HLA2bx7m1EoG4b6jAyiyAdR6mWN7q6kr3UCFRY5zMiE1Fo5sj3TNBzNESgS%2B9BqNedHJA5%2B6szI%2FJY7Ygp%2B%2B8hEPwAYUG1dn1SFmyVewqm4MK%2BnPRc%2BwnEwRP2dP7towIrhjl3vpzknpFG9u6KY7%2BRgkzMM%2BvrghGoX0hBF7pzW0b5gJT9f6YggJ5%2F6BOGsqM%2FT52yJ7N6P%2FN5%2FcOGXaWi1heeBoEX8yVpnGB3SZC4VuJbOqqd%2FUEp1PEE2JbQ2QnOawRUZnVW07ww%3D%3D';
  var tokenTs = 1632351127671;

  test('Parse a token', () {
    Token token = Token.fromString(tokenStr);
    expect(token.exp,
        equals(DateTime.fromMillisecondsSinceEpoch(tokenTs).toUtc()));
  });
}
